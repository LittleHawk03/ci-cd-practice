---
 


- name: full image of web server from docker hub
  docker_image:
    name: "{{ webserver_image_name }}"
    tag: "{{ webserver_image_tag }}"
    source: pull


- name: creat a docker container for web app and mapping port
  docker_container:
    name: "{{ webapp_container_name }}"
    image: "{{ webapp_image_name }}:{{ webapp_image_tag }}"
    ports:
      - "5500:5500"
    env:
      MONGO_HOST: "{{ MONGO_HOST }}"
      MONGO_PORT: "{{ MONGO_PORT }}"
      FLASK_ENV: "{{ FLASK_ENV }}"
    state: started

